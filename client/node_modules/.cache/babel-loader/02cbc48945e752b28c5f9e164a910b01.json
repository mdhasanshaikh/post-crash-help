{"ast":null,"code":"var _jsxFileName = \"/Users/mdhasan/Desktop/md/post_crash_help/mongo_db/client/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"./App.css\";\nimport RecordList from \"./components/record-list\";\nimport AlertPopup from \"./components/alert-popup\";\nimport NotificationCenter from \"./components/notification-center/notification-center\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      accidents: [],\n      inputField: [{\n        id: 1,\n        name: \"Accident id\",\n        value: 0\n      }, {\n        id: 2,\n        name: \"Served\",\n        value: 0\n      }],\n      clickedAccident: {}\n    };\n\n    this.getAllServedAccidents = _ => {\n      let allAccidents = this.state.accidents;\n      allAccidents = allAccidents.filter(accident => accident.served === 1);\n      allAccidents = allAccidents.sort((a, b) => a.date < b.date ? 1 : -1);\n      let servedAccidents = allAccidents.map(accident => {\n        let formatedAccident = {};\n        formatedAccident.id = accident.id;\n        formatedAccident.patientName = accident.name;\n        formatedAccident.date = accident.date;\n        formatedAccident.descript = [{\n          key: 0,\n          title: \"License no.\",\n          text: accident.license_no\n        }, {\n          key: 1,\n          title: \"Medical condition\",\n          text: accident.medical_cond\n        }, {\n          key: 2,\n          title: \"Location\",\n          text: accident.location\n        }];\n        return formatedAccident;\n      });\n      return servedAccidents;\n    };\n\n    this.getAllUnServedAccidents = _ => {\n      let allAccidents = this.state.accidents;\n      allAccidents = allAccidents.filter(accident => accident.served === 0);\n      allAccidents = allAccidents.sort((a, b) => a.date < b.date ? 1 : -1);\n      let servedAccidents = allAccidents.map(accident => {\n        let formatedAccident = {};\n        formatedAccident.id = accident.id;\n        formatedAccident.patientName = accident.name;\n        formatedAccident.date = accident.date;\n        formatedAccident.license_no = accident.license_no;\n        formatedAccident.location = accident.location;\n        return formatedAccident;\n      });\n      return servedAccidents;\n    };\n\n    this.handleInputValueChange = env => {\n      let inputField = this.state.inputField;\n      inputField.map(field => {\n        if (field.name === env.target.name) {\n          field.value = env.target.value;\n        }\n\n        return field;\n      });\n      this.setState({\n        inputField\n      });\n    };\n\n    this.handleServedBtnClick = accident_id => {\n      fetch(`http://localhost:4000/accidents/update?accident_id=\"${accident_id}\"&status=${1}`).then(this.getAllAccidents).catch(err => console.log(err));\n      const clickedAccident = this.state.clickedAccident;\n\n      if (Object.entries(clickedAccident).length !== 0) {\n        this.setState({\n          clickedAccident: {}\n        });\n      }\n    };\n\n    this.handleNotificationItemClick = clickAccident => {\n      this.setState({\n        clickedAccident: clickAccident\n      });\n    };\n\n    this.handleAlertBoxClose = () => {\n      this.setState({\n        clickedAccident: {}\n      });\n    };\n  }\n\n  componentDidMount() {} // this.getAllAccidents();\n  // getAllAccidents = _ => {};\n\n\n  render() {\n    return React.createElement(Provider, {\n      store: store,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Post Crash Help\"), React.createElement(\"main\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"listTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"All accidents\"), React.createElement(RecordList, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    })), React.createElement(NotificationCenter, {\n      accidents: this.getAllUnServedAccidents(),\n      handleNotificationItemClick: this.handleNotificationItemClick,\n      handleServedBtnClick: this.handleServedBtnClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), Object.entries(this.state.clickedAccident).length === 0 ? null : React.createElement(AlertPopup, {\n      accident: this.state.clickedAccident,\n      handleAlertBoxClose: this.handleAlertBoxClose,\n      handleServedBtnClick: this.handleServedBtnClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mdhasan/Desktop/md/post_crash_help/mongo_db/client/src/App.js"],"names":["React","Component","RecordList","AlertPopup","NotificationCenter","Provider","store","App","state","accidents","inputField","id","name","value","clickedAccident","getAllServedAccidents","_","allAccidents","filter","accident","served","sort","a","b","date","servedAccidents","map","formatedAccident","patientName","descript","key","title","text","license_no","medical_cond","location","getAllUnServedAccidents","handleInputValueChange","env","field","target","setState","handleServedBtnClick","accident_id","fetch","then","getAllAccidents","catch","err","console","log","Object","entries","length","handleNotificationItemClick","clickAccident","handleAlertBoxClose","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport RecordList from \"./components/record-list\";\nimport AlertPopup from \"./components/alert-popup\";\nimport NotificationCenter from \"./components/notification-center/notification-center\";\n\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\n\nclass App extends Component {\n  state = {\n    accidents: [],\n    inputField: [\n      { id: 1, name: \"Accident id\", value: 0 },\n      { id: 2, name: \"Served\", value: 0 }\n    ],\n    clickedAccident: {}\n  };\n\n  componentDidMount() {\n    // this.getAllAccidents();\n  }\n\n  // getAllAccidents = _ => {};\n\n  getAllServedAccidents = _ => {\n    let allAccidents = this.state.accidents;\n\n    allAccidents = allAccidents.filter(accident => accident.served === 1);\n    allAccidents = allAccidents.sort((a, b) => (a.date < b.date ? 1 : -1));\n\n    let servedAccidents = allAccidents.map(accident => {\n      let formatedAccident = {};\n\n      formatedAccident.id = accident.id;\n      formatedAccident.patientName = accident.name;\n      formatedAccident.date = accident.date;\n\n      formatedAccident.descript = [\n        {\n          key: 0,\n          title: \"License no.\",\n          text: accident.license_no\n        },\n        {\n          key: 1,\n          title: \"Medical condition\",\n          text: accident.medical_cond\n        },\n        {\n          key: 2,\n          title: \"Location\",\n          text: accident.location\n        }\n      ];\n      return formatedAccident;\n    });\n\n    return servedAccidents;\n  };\n\n  getAllUnServedAccidents = _ => {\n    let allAccidents = this.state.accidents;\n\n    allAccidents = allAccidents.filter(accident => accident.served === 0);\n    allAccidents = allAccidents.sort((a, b) => (a.date < b.date ? 1 : -1));\n\n    let servedAccidents = allAccidents.map(accident => {\n      let formatedAccident = {};\n\n      formatedAccident.id = accident.id;\n      formatedAccident.patientName = accident.name;\n      formatedAccident.date = accident.date;\n      formatedAccident.license_no = accident.license_no;\n      formatedAccident.location = accident.location;\n\n      return formatedAccident;\n    });\n\n    return servedAccidents;\n  };\n\n  handleInputValueChange = env => {\n    let inputField = this.state.inputField;\n    inputField.map(field => {\n      if (field.name === env.target.name) {\n        field.value = env.target.value;\n      }\n      return field;\n    });\n\n    this.setState({\n      inputField\n    });\n  };\n\n  handleServedBtnClick = accident_id => {\n    fetch(\n      `http://localhost:4000/accidents/update?accident_id=\"${accident_id}\"&status=${1}`\n    )\n      .then(this.getAllAccidents)\n      .catch(err => console.log(err));\n\n    const clickedAccident = this.state.clickedAccident;\n\n    if (Object.entries(clickedAccident).length !== 0) {\n      this.setState({\n        clickedAccident: {}\n      });\n    }\n  };\n\n  handleNotificationItemClick = clickAccident => {\n    this.setState({ clickedAccident: clickAccident });\n  };\n\n  handleAlertBoxClose = () => {\n    this.setState({\n      clickedAccident: {}\n    });\n  };\n\n  render() {\n    return (\n      <Provider store={store}>\n        <div className=\"App\">\n          <nav>Post Crash Help</nav>\n          <main>\n            <div className=\"listTitle\">All accidents</div>\n            <RecordList />\n            {/* <RecordList accidents={this.getAllServedAccidents()} /> */}\n          </main>\n\n          <NotificationCenter\n            accidents={this.getAllUnServedAccidents()}\n            handleNotificationItemClick={this.handleNotificationItemClick}\n            handleServedBtnClick={this.handleServedBtnClick}\n          />\n          {Object.entries(this.state.clickedAccident).length === 0 ? null : (\n            <AlertPopup\n              accident={this.state.clickedAccident}\n              handleAlertBoxClose={this.handleAlertBoxClose}\n              handleServedBtnClick={this.handleServedBtnClick}\n            />\n          )}\n        </div>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}